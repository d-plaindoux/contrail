<?xml version='1.0'?>
<ecosystem>
	<pipeline name='PayLoad'
		factory='org.wolfgang.contrail.codec.payload.PayLoadTransducerFactory' />

	<pipeline name='Serialize'
		factory='org.wolfgang.contrail.codec.serializer.SerializerTransducerFactory' />

	<pipeline name='Coercion'
		factory='org.wolfgang.contrail.codec.coercion.CoercionTransducerFactory'>
		<param> org.wolfgang.contrail.network.event.NetEvent </param>
	</pipeline>

	<pipeline name='JAXB'
		factory='org.wolfgang.contrail.codec.json.JAXBTransducerFactory'>
		<param> org.wolfgang.contrail.network.event.NetEvent </param>
	</pipeline>

	<pipeline name='ClientConnector'
		factory='org.wolfgang.contrail.network.component.NetworkAcceptanceComponent' />

	<pipeline name='ConcurrentSource'
		factory='org.wolfgang.contrail.component.pipeline.concurrent.ConcurrentSourcePipelineComponent' />

	<pipeline name='ConcurrentDestination'
		factory='org.wolfgang.contrail.component.pipeline.concurrent.ConcurrentDestinationPipelineComponent' />

	<flow name='Parallel'> ConcurrentSource ConcurrentDestination </flow>
	<flow name='Event'> Parallel Coercion ClientConnector NS </flow>
	<flow name='NetEvent'> PayLoad Serialize Event </flow>
	<flow name='WebEvent'> JAXB Event </flow>

	<terminal name='Logger' factory='org.wolfgang.contrail.bound.LoggerComponent' />

	<router name='NetStation'
		factory='org.wolfgang.contrail.network.component.NetworkComponent'>
		<self name='A.A' />

		<!-- Net Socket Client -->
		<client name='A.B' filter='A.*' endpoint='tcp://localhost:6666'>
			NetEvent
		</client>

		<!-- Web Socket Client -->
		<client name='A.C' filter='A.*' endpoint='ws://localhost:6668'>
			WebEvent
		</client>
	</router>

	<binder name='NetHook' typein="byte[]" typeout="byte[]">
		NetEvent
	</binder>

	<binder name='WebHook' typein="String" typeout="String">
		WebEvent
	</binder>

	<server endpoint='tcp://localhost:6667'>
		PayLoad Serialize Event
	</server>

	<server endpoint='ws://localhost:6667'>
		WebEvent
	</server>

	<main>
		NS=NetStation Logger
	</main>
</ecosystem>
