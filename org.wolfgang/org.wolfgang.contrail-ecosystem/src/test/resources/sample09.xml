<?xml version='1.0'?>
<ecosystem>

	<import>
		org.wolfgang.contrail.component.pipeline.transducer.coercion.CoercionTransducerFactory
	</import>
	<import>
		org.wolfgang.contrail.component.pipeline.concurrent.ParallelSourceComponent
	</import>
	<import>
		org.wolfgang.contrail.component.pipeline.concurrent.ParallelDestinationComponent
	</import>
	<import>
		org.wolfgang.contrail.component.pipeline.transducer.payload.PayLoadTransducerFactory
	</import>
	<import>
		org.wolfgang.contrail.component.pipeline.transducer.serializer.SerializationTransducerFactory
	</import>
	<import>
		org.wolfgang.contrail.ecosystem.lang.EchoComponent
	</import>

	<define name="Coercion">
		<function>
			<var>type</var>
			<ref>CoercionTransducerFactory</ref>
		</function>
	</define>

	<define name='Parallel'>
		<function>
			<var>flow</var>
			<ref>ParallelSourceComponent</ref>
			<ref>flow</ref>
			<ref>ParallelDestinationComponent</ref>
		</function>
	</define>

	<define name='Main'>
		<ref>PayLoadTransducerFactory</ref>
		<apply>
			<ref>Parallel</ref>
			<ref>SerializationTransducerFactory</ref>
		</apply>
		<apply>
			<ref>Coercion</ref>
			<atom>java.lang.String</atom>
		</apply>
		<ref>EchoComponent</ref>
	</define>

</ecosystem>
