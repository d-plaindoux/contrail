/**
 * Tunnel example
 */

// Type definitions
// ----------------------------------------------------------------------
// type terminal<U,D>;
// type initial<U,D;
// type pipeline<U,D> = initial<U,D> & terminal<U,D>;
// type client = string -> terminal<byte[]>;
// type server = string -> initial<byte[]> -> ??);
// ----------------------------------------------------------------------

def client = extern "org.wolfgang.contrail.connection.net.Net" "client";

// ----------------------------------------------------------------------

def Client = fun uri -> client;
def Server = fun uri flow -> server;
def Tunnel = fun in out -> Server in (fun client ->  client <> Client out):

//
// Usage: Tunnel "tcp://localhost:6666" "tcp://localhost:6667"
//