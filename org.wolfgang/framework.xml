<?xml version="1.0"?>

<!-- ============================================================ -->
<!-- Ecosystem definition                                         -->
<!-- ============================================================ -->

<Ecosystem>
	<Components>
		<!-- ============================================================ -->
		<!-- Web Socket dedicated component -->
		<!-- ============================================================ -->
		<DataFlow id="web.channel">
			<Transducer
				factory="org.wolfgang.contrail.network.codec.json.JSONTransducerFactory" />
		</DataFlow>

		<!-- ============================================================ -->
		<!-- IO Socket dedicated component -->
		<!-- ============================================================ -->
		<DataFlow id="io.channel">
			<Transducer
				factory="org.wolfgang.contrail.network.codec.payload.PayLoadTransducerFactory" />
			<Transducer
				factory="org.wolfgang.contrail.network.codec.jaxb.JAXBTransducerFactory">
				<Param>AJavaClassType</Param>
			</Transducer>
		</DataFlow>
	</Components>

	<Binders>
		<!-- ============================================================ -->
		<!-- IO Socket initial binder -->
		<!-- ============================================================ -->
		<InitialBinder>
			<Type>
				<Name>io.channel</Name>
				<Incoming>byte[]</Incoming>
				<Outgoing>byte[]</Outgoing>
			</Type>
			<DataFlowInstance refid="io.channel" />
		</InitialBinder>

		<!-- ============================================================ -->
		<!-- Web Socket initial binder -->
		<!-- ============================================================ -->
		<InitialBinder>
			<Type>
				<Name>web.channel</Name>
				<Incoming>String</Incoming>
				<Outgoing>String</Outgoing>
			</Type>
			<DataFlowInstance refid="io.channel" />
		</InitialBinder>
	</Binders>
</Ecosystem>
